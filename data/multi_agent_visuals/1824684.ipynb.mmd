%% Data source definition
flowchart TD
    A["<img src='icons/file.svg' width=100 height=100/> <br/> ../input/home-data-for-ml-course/train.csv"]
    %% Data Variables
    B["<img src='icons/table.svg' width=100 height=100/> <br/> home_data"]
    C["<img src='icons/column_split.svg' width=100 height=100/> <br/> y"]
    D["<img src='icons/column_split.svg' width=100 height=100/> <br/> X"]
    E["<img src='icons/row_split.svg' width=100 height=100/> <br/> train_X"]
    F["<img src='icons/row_split.svg' width=100 height=100/> <br/> val_X"]
    G["<img src='icons/row_split.svg' width=100 height=100/> <br/> train_y"]
    H["<img src='icons/row_split.svg' width=100 height=100/> <br/> val_y"]
    I["<img src='icons/brain.svg' width=100 height=100/> <br/> iowa_model"]
    J["<img src='icons/brain.svg' width=100 height=100/> <br/> val_predictions"]
    K["<img src='icons/brain.svg' width=100 height=100/> <br/> val_mae"]
    L["<img src='icons/brain.svg' width=100 height=100/> <br/> final_model"]

    %% Data Flow
    %% Reading the data source
    A -->|"Read CSV into DataFrame"| B
    B -->|"Extract 'SalePrice'"| C
    B -->|"Select relevant features"| D
    D -->|"Split into train_X, val_X"| E
    D -->|"Split into train_X, val_X"| F
    C -->|"Split into train_y, val_y"| G
    C -->|"Split into train_y, val_y"| H
    E -->|"Train model"| I
    G -->|"Train model"| I
    F -->|"Predict using model"| J
    J -->|"Calculate MAE with val_y"| K
    K -->|"Assess model performance"| L

    %% Models
    style I fill:#C6F4D6,stroke:#333,stroke-width:4px
    style L fill:#C6F4D6,stroke:#333,stroke-width:4px